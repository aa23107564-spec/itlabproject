# 第一章最终灯光设定记录

## 📅 记录日期
2025年11月2日

## 🎯 最终配置（已应用）

### 全局设置
```javascript
configVersion: 23
lightIntensityMultiplier: 0.0001  // 默认强度系数
baseAmbientLight: 0.00005         // 基础环境光
toneMappingExposure: 0.001        // 渲染器曝光度（极低，解决过曝）
emissiveMultiplier: 0.0001        // 材质自发光系数
debugMode: true                   // 调试模式已开启（查看材质名称）
```

### 🌟 材质自发光配置（Emissive）

特定材质的自发光强度设定：

| 材质名称 | 发光强度 | 说明 |
|---------|---------|------|
| **螢幕** | 3.0 | 电脑螢幕发光效果（增强3倍）💡 |
| 螢幕殼 | 0.05 | 螢幕外壳稍微发光 |
| 檯燈燈罩 | 0.1 | 台灯灯罩适度发光 |
| 其他材质 | × 0.0001 | 大幅降低发光（避免过曝） |

### 🔦 各灯光的最终强度设定（使用 light.glb 统一文件）

| 灯光名称 | 类型 | 原始强度 | 强度系数 | 最终强度 | 备注 |
|---------|------|---------|---------|---------|------|
| **吊燈light** | PointLight | 7,957.05 | 0.0005 | 3.98 | 天花板吊灯（橙色） |
| **檯燈light** | PointLight | 260.89 | 0.002 | 0.52 | 桌面台灯（白色） |
| **吉他light** | SpotLight | 2,313.52 | 0.0005 | 1.16 | 照射吉他（橙色） |
| **吊燈指向light** | SpotLight | 112,326.95 | 0.00001 | 1.12 | 吊灯指向（橙黄色）⚠️ 原始强度超高！ |
| **玄關light** | SpotLight | 7,579.21 | 0.00002 | 0.15 | 玄关灯（橙色） |
| **窗plight** | PointLight | 7,421.55 | **0.025** | **185.54** | 窗户1（蓝色）✨ 提升2.5倍 |
| **窗2plight** | PointLight | 7,279.74 | **0.025** | **181.99** | 窗户2（蓝色）✨ 提升2.5倍 |
| **玄關補光Plight** | PointLight | 1,081.70 | 0.00005 | 0.054 | 玄关补光（橙色） |

### 📍 灯光位置（世界坐标）

```javascript
'吊燈light': [-0.277, 2.074, -3.026]           // 天花板中央
'檯燈light': [0.486, 0.513, -1.694]            // 桌面
'吉他light': [1.693, 1.710, -4.634]            // 吉他上方
'吊燈指向light': [-0.276, 2.277, -3.030]       // 天花板（略高于吊灯）
'玄關light': [-1.679, 1.087, -0.290]           // 玄关入口
'窗plight': [-4.434, 1.242, -4.785]            // 窗户1位置
'窗2plight': [-4.006, 1.242, -1.660]           // 窗户2位置
'玄關補光Plight': [0.486, 1.731, 1.165]        // 玄关补光位置
```

### 🎨 灯光颜色信息

| 灯光 | 颜色代码 | 颜色描述 |
|------|---------|---------|
| 吊燈light | #ffa726 | 橙色（暖光） |
| 檯燈light | #ffffff | 白色 |
| 吉他light | #ffa726 | 橙色（暖光） |
| 吊燈指向light | #ffcd9a | 橙黄色（暖光） |
| 玄關light | #ffa726 | 橙色（暖光） |
| 窗plight | #7a8eff | 蓝色（冷光） |
| 窗2plight | #7a8eff | 蓝色（冷光） |
| 玄關補光Plight | #ffa726 | 橙色（暖光） |

## 🔥 关键发现

### 过曝的主要原因

1. **吊燈指向light** 的原始强度 **112,326**！
   - 这是其他灯光的 14-432 倍
   - 需要降至 0.00001（原始强度的 0.001%）才能控制

2. **窗户灯光** 强度 ~7,400
   - 需要降至 0.01（原始强度的 1%）

3. **材质自发光** 
   - 许多材质（螢幕、書頁、檯燈燈罩等）都有自发光属性
   - 已完全禁用（设为 0）

## 📊 最终效果

- ✅ 消除过曝
- ✅ 保留所有8个灯光的位置和颜色
- ✅ 灯光可以正常照亮物体
- ✅ 场景有适当的明暗对比
- ✅ 窗户蓝光可见
- ✅ 台灯暖光可见

## 🔧 技术实现

### 灯光来源
- **单一文件**: `light.glb`（包含所有8个灯光）
- **模型文件**: `chpapter1.glb`（场景和物体，灯光已禁用）

### 渲染设置
- **色调映射**: ACESFilmicToneMapping
- **曝光度**: 0.001（极低，避免过曝）
- **阴影**: 启用
- **抗锯齿**: 启用

### 坐标系统
- 使用**世界坐标**（getWorldPosition）
- 考虑父节点变换
- 确保灯光位置准确

## 💾 配置文件位置

`src/components/Chapter1LightConfig.js`

## 📝 修改方法

如需调整任何灯光：
1. 编辑 `Chapter1LightConfig.js` 中的 `specificLights`
2. 修改对应灯光的系数值
3. 将 `configVersion` 数字 +1
4. 保存文件
5. 浏览器会自动重新加载

## ⚠️ 重要提示

- 由于原始强度差异巨大，不同灯光需要不同的系数
- 建议调整范围：0.00001 - 0.01
- 超过 0.01 可能导致过曝
- 低于 0.00001 可能看不见效果

---

**最后更新**: 2025年11月2日  
**配置版本**: 13  
**状态**: ✅ 已应用并测试

